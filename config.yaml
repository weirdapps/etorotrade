data:
  portfolio_csv: yahoofinance/input/portfolio.csv
  cache_enabled: true
  cache_ttl_hours: 4  # Max 4 hours for non-price data (prices always fresh)
tier_thresholds:
  mega_tier_min: 500000000000
  large_tier_min: 100000000000
  mid_tier_min: 10000000000
  small_tier_min: 2000000000
universal_thresholds:
  # Market cap gate: hard floor at $2B, tiered analyst requirements
  min_market_cap: 2000000000  # $2B hard floor - no stocks below this
  small_cap_threshold: 5000000000  # $5B - boundary between small and standard
  small_cap_min_analysts: 6  # $2-5B requires 6+ analysts (institutional interest)
  min_analyst_count: 4  # $5B+ requires 4+ analysts (standard)
  min_price_targets: 4  # Standard price target requirement
us_mega:
  buy:
    # US MEGA: More lenient thresholds - large liquid names with strong coverage
    min_upside: 10
    min_buy_percentage: 75
    min_beta: 0.2
    max_beta: 3
    min_forward_pe: 0.5
    max_forward_pe: 60
    min_trailing_pe: 0.5
    max_trailing_pe: 90
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2
    min_exret: 6
    min_earnings_growth: -25
    min_price_performance: -25
    min_analysts: 12
    min_price_targets: 8
    min_roe: 8.0
    max_debt_equity: 200.0  # Increased from 150 - MEGA caps can carry higher debt post-acquisitions
    min_fcf_yield: -5.0  # Changed from 0.5 - growth companies may have negative FCF during expansion
    min_revenue_growth: -5
    min_pct_from_52w_high: 65
    require_above_200dma: false  # Relaxed for MEGA caps - quality stocks may dip below temporarily
    min_analyst_momentum: -8
    max_pe_vs_sector: 1.5
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 0
    min_buy_percentage: 50
    min_beta: 3.5
    min_forward_pe: 80
    min_trailing_pe: 170
    min_peg: 5.5
    min_short_interest: 4
    max_exret: 2
    max_earnings_growth: -45
    max_price_performance: -45
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 50
    max_analyst_momentum: -20
    max_pe_vs_sector: 2.0
us_large:
  buy:
    # US LARGE: More lenient thresholds - good coverage, liquid names
    min_upside: 12
    min_buy_percentage: 77
    min_beta: 0.2
    max_beta: 2.5
    min_forward_pe: 0.5
    max_forward_pe: 55
    min_trailing_pe: 0.5
    max_trailing_pe: 85
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.25
    min_exret: 8
    min_earnings_growth: -22.5
    min_price_performance: -22.5
    min_analysts: 10
    min_price_targets: 6
    min_roe: 8.0
    max_debt_equity: 175.0  # Increased from 150 - large caps can carry moderate debt
    min_fcf_yield: -3.0  # Changed from 0.25 - growth companies may have negative FCF
    min_pct_from_52w_high: 70
    require_above_200dma: false  # Relaxed for LARGE caps - quality stocks may dip below temporarily
    min_analyst_momentum: -8
    max_pe_vs_sector: 1.5
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 5
    min_buy_percentage: 55
    min_beta: 3
    min_forward_pe: 75
    min_trailing_pe: 180
    min_peg: 5.5
    min_short_interest: 4.25
    max_exret: 3
    max_earnings_growth: -42.5
    max_price_performance: -42.5
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 50
    max_analyst_momentum: -20
    max_pe_vs_sector: 2.0
us_mid:
  buy:
    # US MID: Moderate thresholds - need stronger conviction for smaller caps
    min_upside: 15
    min_buy_percentage: 80
    min_beta: 0.2
    max_beta: 2.5
    min_forward_pe: 0.5
    max_forward_pe: 50
    min_trailing_pe: 0.5
    max_trailing_pe: 80
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.5
    min_exret: 12
    min_earnings_growth: -20
    min_price_performance: -20
    min_analysts: 8
    min_price_targets: 5
    min_roe: 10.0
    max_debt_equity: 130.0
    min_fcf_yield: 0.0
    min_pct_from_52w_high: 75
    require_above_200dma: true
    min_analyst_momentum: -5
    max_pe_vs_sector: 1.4
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 7.5
    min_buy_percentage: 60
    min_beta: 3
    min_forward_pe: 70
    min_trailing_pe: 190
    min_peg: 5.5
    min_short_interest: 4.5
    max_exret: 5
    max_earnings_growth: -40
    max_price_performance: -40
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 45
    max_analyst_momentum: -18
    max_pe_vs_sector: 1.8
us_small:
  buy:
    # US SMALL: Stricter - higher risk requires higher conviction
    # Reduced buy% from 88→85 to capture strong opportunities while staying selective
    min_upside: 25
    min_buy_percentage: 85
    min_beta: 0.2
    max_beta: 2.5
    min_forward_pe: 0.5
    max_forward_pe: 45
    min_trailing_pe: 0.5
    max_trailing_pe: 75
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.75
    min_exret: 22
    min_earnings_growth: -17.5
    min_price_performance: -17.5
    min_analysts: 6
    min_price_targets: 4
    min_roe: 10.0
    max_debt_equity: 120.0
    min_fcf_yield: -1.0
    min_pct_from_52w_high: 75
    require_above_200dma: true
    min_analyst_momentum: -5
    max_pe_vs_sector: 1.3
    min_pe_vs_sector: 0.35
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 10
    min_buy_percentage: 65
    min_beta: 3
    min_forward_pe: 65
    min_trailing_pe: 200
    min_peg: 5.5
    min_short_interest: 4.75
    max_exret: 7
    max_earnings_growth: -37.5
    max_price_performance: -37.5
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 40
    max_analyst_momentum: -15
    max_pe_vs_sector: 1.6
us_micro:
  buy:
    # US MICRO: Very strict - highest risk tier (mostly filtered by min_market_cap anyway)
    min_upside: 40
    min_buy_percentage: 95
    min_beta: 0.2
    max_beta: 2.5
    min_forward_pe: 0.5
    max_forward_pe: 40
    min_trailing_pe: 0.5
    max_trailing_pe: 70
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 3
    min_exret: 35
    min_earnings_growth: -15
    min_price_performance: -15
    min_analysts: 6
    min_price_targets: 4
    min_roe: 10.0
    max_debt_equity: 100.0
    min_pct_from_52w_high: 80
    require_above_200dma: true
    min_analyst_momentum: -3
    max_pe_vs_sector: 1.2
    min_pe_vs_sector: 0.4
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 12.5
    min_buy_percentage: 70
    min_beta: 3
    min_forward_pe: 60
    min_trailing_pe: 210
    min_peg: 5.5
    min_short_interest: 5
    max_exret: 9
    max_earnings_growth: -35
    max_price_performance: -35
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 35
    max_analyst_momentum: -12
    max_pe_vs_sector: 1.5
eu_mega:
  buy:
    # EU MEGA: Slightly relaxed to capture more EU opportunities
    min_upside: 10
    min_buy_percentage: 70
    min_beta: 0.2
    max_beta: 2.5
    min_forward_pe: 0.5
    max_forward_pe: 60
    min_trailing_pe: 0.5
    max_trailing_pe: 90
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2
    min_exret: 7
    min_earnings_growth: -25
    min_price_performance: -25
    min_analysts: 10
    min_price_targets: 6
    min_roe: 8.0
    max_debt_equity: 150.0
    min_fcf_yield: 0.5
    min_pct_from_52w_high: 65
    require_above_200dma: true
    min_analyst_momentum: -10
    max_pe_vs_sector: 1.5
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 5
    min_buy_percentage: 50
    min_beta: 2.5
    min_forward_pe: 80
    min_trailing_pe: 150
    min_peg: 5.5
    min_short_interest: 4
    max_exret: 3
    max_earnings_growth: -45
    max_price_performance: -45
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 50
    max_analyst_momentum: -20
    max_pe_vs_sector: 2.0
eu_large:
  buy:
    # EU LARGE: Slightly relaxed to capture more EU opportunities
    min_upside: 12
    min_buy_percentage: 75
    min_beta: 0.2
    max_beta: 2.5
    min_forward_pe: 0.5
    max_forward_pe: 55
    min_trailing_pe: 0.5
    max_trailing_pe: 85
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.25
    min_exret: 9
    min_earnings_growth: -22.5
    min_price_performance: -22.5
    min_analysts: 8
    min_price_targets: 5
    min_roe: 8.0
    max_debt_equity: 150.0
    min_fcf_yield: 0.25
    min_pct_from_52w_high: 70
    require_above_200dma: true
    min_analyst_momentum: -10
    max_pe_vs_sector: 1.5
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 7.5
    min_buy_percentage: 55
    min_beta: 3
    min_forward_pe: 75
    min_trailing_pe: 160
    min_peg: 5.5
    min_short_interest: 4.25
    max_exret: 5
    max_earnings_growth: -42.5
    max_price_performance: -42.5
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 50
    max_analyst_momentum: -20
    max_pe_vs_sector: 2.0
eu_mid:
  buy:
    # EU MID: Slightly relaxed to capture more EU opportunities
    min_upside: 18
    min_buy_percentage: 78
    min_beta: 0.2
    max_beta: 2
    min_forward_pe: 0.5
    max_forward_pe: 50
    min_trailing_pe: 0.5
    max_trailing_pe: 80
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.5
    min_exret: 14
    min_earnings_growth: -20
    min_price_performance: -20
    min_analysts: 8
    min_price_targets: 5
    min_roe: 8.0
    max_debt_equity: 150.0
    min_fcf_yield: 0.0
    min_pct_from_52w_high: 75
    require_above_200dma: true
    min_analyst_momentum: -8
    max_pe_vs_sector: 1.4
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 10
    min_buy_percentage: 60
    min_beta: 2.5
    min_forward_pe: 70
    min_trailing_pe: 170
    min_peg: 5.5
    min_short_interest: 4.5
    max_exret: 6
    max_earnings_growth: -40
    max_price_performance: -40
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 45
    max_analyst_momentum: -18
    max_pe_vs_sector: 1.8
eu_small:
  buy:
    # EU SMALL: Moderately strict - balance EU capture with quality
    # Reduced buy% from 85→82 to capture strong opportunities while staying selective
    min_upside: 28
    min_buy_percentage: 82
    min_beta: 0.2
    max_beta: 2
    min_forward_pe: 0.5
    max_forward_pe: 45
    min_trailing_pe: 0.5
    max_trailing_pe: 75
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.75
    min_exret: 24
    min_earnings_growth: -17.5
    min_price_performance: -17.5
    min_analysts: 6
    min_price_targets: 4
    min_roe: 8.0
    max_debt_equity: 150.0
    min_fcf_yield: -1.0
    min_pct_from_52w_high: 75
    require_above_200dma: true
    min_analyst_momentum: -5
    max_pe_vs_sector: 1.3
    min_pe_vs_sector: 0.35
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 12.5
    min_buy_percentage: 65
    min_beta: 2.5
    min_forward_pe: 65
    min_trailing_pe: 180
    min_peg: 5.5
    min_short_interest: 4.75
    max_exret: 9
    max_earnings_growth: -37.5
    max_price_performance: -37.5
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 40
    max_analyst_momentum: -15
    max_pe_vs_sector: 1.6
eu_micro:
  buy:
    # EU MICRO: Strict - mostly filtered by min_market_cap anyway
    min_upside: 38
    min_buy_percentage: 92
    min_beta: 0.2
    max_beta: 2
    min_forward_pe: 0.5
    max_forward_pe: 40
    min_trailing_pe: 0.5
    max_trailing_pe: 70
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 3
    min_exret: 35
    min_earnings_growth: -15
    min_price_performance: -15
    min_analysts: 6
    min_price_targets: 4
    min_roe: 10.0
    max_debt_equity: 120.0
    min_pct_from_52w_high: 80
    require_above_200dma: true
    min_analyst_momentum: -3
    max_pe_vs_sector: 1.2
    min_pe_vs_sector: 0.4
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 15
    min_buy_percentage: 70
    min_beta: 2.5
    min_forward_pe: 60
    min_trailing_pe: 190
    min_peg: 5.5
    min_short_interest: 5
    max_exret: 11
    max_earnings_growth: -35
    max_price_performance: -35
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 35
    max_analyst_momentum: -12
    max_pe_vs_sector: 1.5
hk_mega:
  buy:
    # HK MEGA: Stricter than US/EU but achievable for quality stocks
    # Relaxed from 22/88/20 to 15/82/12 - still 50% stricter than US MEGA
    min_upside: 15
    min_buy_percentage: 82
    min_beta: 0.2
    max_beta: 2.5
    min_forward_pe: 0.5
    max_forward_pe: 60
    min_trailing_pe: 0.5
    max_trailing_pe: 90
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2
    min_exret: 12
    min_earnings_growth: -25
    min_price_performance: -25
    min_analysts: 15
    min_price_targets: 8
    min_roe: 10.0
    max_debt_equity: 120.0
    min_fcf_yield: 0.75
    min_pct_from_52w_high: 70
    require_above_200dma: true
    min_analyst_momentum: -8
    max_pe_vs_sector: 1.5
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 7.5
    min_buy_percentage: 55
    min_beta: 3
    min_forward_pe: 80
    min_trailing_pe: 140
    min_peg: 5.5
    min_short_interest: 4
    max_exret: 5
    max_earnings_growth: -45
    max_price_performance: -45
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 45
    max_analyst_momentum: -25
    max_pe_vs_sector: 2.2
hk_large:
  buy:
    # HK LARGE: Stricter than US/EU but achievable for quality stocks
    # Relaxed from 28/90/25 to 18/85/15 - still 50% stricter than US LARGE
    min_upside: 18
    min_buy_percentage: 85
    min_beta: 0.2
    max_beta: 2
    min_forward_pe: 0.5
    max_forward_pe: 55
    min_trailing_pe: 0.5
    max_trailing_pe: 85
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.25
    min_exret: 15
    min_earnings_growth: -22.5
    min_price_performance: -22.5
    min_analysts: 12
    min_price_targets: 6
    min_roe: 10.0
    max_debt_equity: 120.0
    min_fcf_yield: 0.5
    min_pct_from_52w_high: 75
    require_above_200dma: true
    min_analyst_momentum: -8
    max_pe_vs_sector: 1.5
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 10
    min_buy_percentage: 60
    min_beta: 2.5
    min_forward_pe: 75
    min_trailing_pe: 150
    min_peg: 5.5
    min_short_interest: 4.25
    max_exret: 6
    max_earnings_growth: -42.5
    max_price_performance: -42.5
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 45
    max_analyst_momentum: -25
    max_pe_vs_sector: 2.2
hk_mid:
  buy:
    # HK MID: Stricter than US/EU but achievable for quality stocks
    # Relaxed from 32/92/30 to 22/88/18 - still 50% stricter than US MID
    min_upside: 22
    min_buy_percentage: 88
    min_beta: 0.2
    max_beta: 2
    min_forward_pe: 0.5
    max_forward_pe: 50
    min_trailing_pe: 0.5
    max_trailing_pe: 80
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.5
    min_exret: 18
    min_earnings_growth: -20
    min_price_performance: -20
    min_analysts: 10
    min_price_targets: 5
    min_roe: 10.0
    max_debt_equity: 120.0
    min_fcf_yield: 0.25
    min_pct_from_52w_high: 80
    require_above_200dma: true
    min_analyst_momentum: -5
    max_pe_vs_sector: 1.5
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 12.5
    min_buy_percentage: 65
    min_beta: 2.5
    min_forward_pe: 70
    min_trailing_pe: 160
    min_peg: 5.5
    min_short_interest: 4.5
    max_exret: 9
    max_earnings_growth: -40
    max_price_performance: -40
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 40
    max_analyst_momentum: -20
    max_pe_vs_sector: 2.0
hk_small:
  buy:
    # HK SMALL: Very strict - higher risk, prefer US/EU
    # Relaxed from 40/95/38 to 30/90/25 - still stricter than US SMALL
    min_upside: 30
    min_buy_percentage: 90
    min_beta: 0.2
    max_beta: 2
    min_forward_pe: 0.5
    max_forward_pe: 45
    min_trailing_pe: 0.5
    max_trailing_pe: 75
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 2.75
    min_exret: 25
    min_earnings_growth: -17.5
    min_price_performance: -17.5
    min_analysts: 8
    min_price_targets: 4
    min_roe: 12.0
    max_debt_equity: 100.0
    min_fcf_yield: 0.0
    min_pct_from_52w_high: 80
    require_above_200dma: true
    min_analyst_momentum: -5
    max_pe_vs_sector: 1.4
    min_pe_vs_sector: 0.3
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 15
    min_buy_percentage: 70
    min_beta: 2.5
    min_forward_pe: 65
    min_trailing_pe: 170
    min_peg: 5.5
    min_short_interest: 4.75
    max_exret: 11
    max_earnings_growth: -37.5
    max_price_performance: -37.5
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 35
    max_analyst_momentum: -18
    max_pe_vs_sector: 1.8
hk_micro:
  buy:
    # HK MICRO: Extremely strict - mostly filtered by min_market_cap anyway
    min_upside: 50
    min_buy_percentage: 98
    min_beta: 0.2
    max_beta: 2
    min_forward_pe: 0.5
    max_forward_pe: 40
    min_trailing_pe: 0.5
    max_trailing_pe: 70
    max_peg: 999.0  # Effectively disabled - PEG has no predictive value (ratio 0.94x)
    max_short_interest: 3
    min_exret: 45
    min_earnings_growth: -15
    min_price_performance: -15
    min_analysts: 8
    min_price_targets: 4
    min_roe: 12.0
    max_debt_equity: 80.0
    min_pct_from_52w_high: 85
    require_above_200dma: true
    min_analyst_momentum: -3
    max_pe_vs_sector: 1.3
    min_pe_vs_sector: 0.35
  sell:
    # Fully Valued thresholds - stocks at fair value with high consensus are not SELL
    fully_valued_upside_threshold: 3.0
    fully_valued_buy_pct_threshold: 80.0
    max_upside: 17.5
    min_buy_percentage: 75
    min_beta: 2.5
    min_forward_pe: 60
    min_trailing_pe: 180
    min_peg: 5.5
    min_short_interest: 5
    max_exret: 14
    max_earnings_growth: -35
    max_price_performance: -35
    min_roe: 5.0
    max_debt_equity: 250.0
    max_pct_from_52w_high: 30
    max_analyst_momentum: -15
    max_pe_vs_sector: 1.6
position_sizing:
  base_position_size: 2500
  tier_multipliers:
    mega: 5
    large: 4
    mid: 3
    small: 2
    micro: 1
output:
  save_to_csv: true
  save_to_html: true
  display_colors: true
  max_display_rows: 99999999
performance:
  max_concurrent_requests: 20  # Increased from 15 for better throughput
  request_timeout_seconds: 30
  retry_attempts: 3
  batch_size: 25  # Tickers per batch
logging:
  level: INFO
  file: logs/trading_analysis.log
  console: true

# Cache Configuration
# Disk cache persists across runs for significant speed improvement
cache:
  enabled: true
  enable_disk: true  # Enable disk cache for persistence across runs
  default_ttl: 14400  # 4 hours for non-price data
  max_items: 15000  # Max items in memory cache
  disk_cache_dir: yahoofinance/data/cache
  # Price fields are NEVER cached - see yahoofinance/core/config.py FIELD_CACHE_CONFIG

# Crypto and Non-Equity Asset Configuration
# Momentum thresholds for crypto assets (no analyst coverage)
crypto_momentum:
  # Major crypto (BTC, ETH) - higher thresholds due to relative stability
  major:
    buy_threshold: 85    # % of 52-week high required for BUY
    hold_threshold: 60   # % of 52-week high - below this triggers SELL
    tickers: ['BTC-USD', 'ETH-USD']
  # Altcoins - slightly more aggressive thresholds
  altcoins:
    buy_threshold: 85    # % of 52-week high required for BUY
    hold_threshold: 55   # % of 52-week high - below this triggers SELL

# Bitcoin proxy stock configuration
# Stocks whose value is primarily tied to Bitcoin holdings or mining
bitcoin_proxy:
  momentum_buy_threshold: 70      # % of 52-week high required for BUY consideration
  momentum_sell_threshold: 35     # % of 52-week high - below this triggers SELL
  min_buy_pct_override: 60        # Relaxed analyst buy% threshold
  require_above_200dma: true      # Require above 200DMA for BUY signal

# IPO Grace Period Configuration
# Recent IPOs exhibit extreme volatility that triggers false SELL signals
# Apply relaxed criteria during grace period
ipo_grace_period:
  enabled: true
  grace_period_months: 12         # Months after IPO to apply relaxed criteria
  relaxed_momentum_threshold: 40  # More lenient 52W% threshold (vs 50% standard)
  ignore_analyst_momentum: true   # Ignore AM column (analyst momentum) for recent IPOs
  # Known recent IPOs (add tickers here for manual override)
  # Format: TICKER: IPO_DATE (YYYY-MM-DD)
  known_ipos:
    ETOR: '2025-05-14'           # eToro Group - May 2025 IPO
    ARM: '2023-09-14'            # ARM Holdings - September 2023 IPO
    BIRK: '2023-10-11'           # Birkenstock - October 2023 IPO

# Enhanced Signal Scoring Framework
# Feature flag to enable multi-factor scoring (set to false to use legacy ANY-trigger logic)
use_signal_scoring: true

# Default scoring configuration (used if region-tier specific config not found)
default_sell_scoring:
  # Score threshold (0-100) for SELL signal
  score_threshold: 65
  # Hard triggers (bypass scoring - immediate SELL)
  hard_trigger_upside: -5          # Below target by 5%+
  hard_trigger_buy_pct: 35         # Less than 35% buy
  # Soft triggers (combined condition - SELL when BOTH conditions met)
  soft_trigger_upside: 0           # Negative upside (below target)
  soft_trigger_buy_pct: 50         # Less than 50% buy consensus
  # Quality override (bypass SELL - protect strong stocks)
  quality_override_buy_pct: 85     # 85%+ analyst buy
  quality_override_upside: 20      # 20%+ upside
  quality_override_exret: 15       # 15%+ expected return
  # Component weights (must sum to 1.0)
  weight_analyst: 0.35
  weight_momentum: 0.25
  weight_valuation: 0.20
  weight_fundamental: 0.20

default_buy_scoring:
  enabled: true
  # Component weights (must sum to 1.0)
  weight_upside: 0.30
  weight_consensus: 0.25
  weight_momentum: 0.20
  weight_valuation: 0.15
  weight_fundamental: 0.10

# Tier-specific scoring overrides (inherits from default if not specified)
us_mega_sell_scoring:
  score_threshold: 65
  hard_trigger_upside: -5
  hard_trigger_buy_pct: 35
  quality_override_buy_pct: 85
  quality_override_upside: 20
  quality_override_exret: 15

us_large_sell_scoring:
  score_threshold: 65
  hard_trigger_upside: -3
  hard_trigger_buy_pct: 38
  quality_override_buy_pct: 85
  quality_override_upside: 18
  quality_override_exret: 14

us_mid_sell_scoring:
  score_threshold: 60
  hard_trigger_upside: -3
  hard_trigger_buy_pct: 40
  quality_override_buy_pct: 88
  quality_override_upside: 22
  quality_override_exret: 16

us_small_sell_scoring:
  score_threshold: 55
  hard_trigger_upside: 0
  hard_trigger_buy_pct: 45
  quality_override_buy_pct: 90
  quality_override_upside: 25
  quality_override_exret: 20

us_micro_sell_scoring:
  score_threshold: 50
  hard_trigger_upside: 0
  hard_trigger_buy_pct: 50
  quality_override_buy_pct: 92
  quality_override_upside: 30
  quality_override_exret: 25

eu_mega_sell_scoring:
  score_threshold: 65
  hard_trigger_upside: -5
  hard_trigger_buy_pct: 35
  quality_override_buy_pct: 82
  quality_override_upside: 18
  quality_override_exret: 13

eu_large_sell_scoring:
  score_threshold: 62
  hard_trigger_upside: -3
  hard_trigger_buy_pct: 38
  quality_override_buy_pct: 83
  quality_override_upside: 18
  quality_override_exret: 14

eu_mid_sell_scoring:
  score_threshold: 58
  hard_trigger_upside: -3
  hard_trigger_buy_pct: 42
  quality_override_buy_pct: 85
  quality_override_upside: 20
  quality_override_exret: 15

eu_small_sell_scoring:
  score_threshold: 55
  hard_trigger_upside: 0
  hard_trigger_buy_pct: 45
  quality_override_buy_pct: 88
  quality_override_upside: 23
  quality_override_exret: 18

eu_micro_sell_scoring:
  score_threshold: 50
  hard_trigger_upside: 0
  hard_trigger_buy_pct: 50
  quality_override_buy_pct: 90
  quality_override_upside: 28
  quality_override_exret: 22

hk_mega_sell_scoring:
  score_threshold: 68
  hard_trigger_upside: -5
  hard_trigger_buy_pct: 38
  quality_override_buy_pct: 88
  quality_override_upside: 22
  quality_override_exret: 18

hk_large_sell_scoring:
  score_threshold: 65
  hard_trigger_upside: -3
  hard_trigger_buy_pct: 40
  quality_override_buy_pct: 88
  quality_override_upside: 23
  quality_override_exret: 18

hk_mid_sell_scoring:
  score_threshold: 62
  hard_trigger_upside: -3
  hard_trigger_buy_pct: 42
  quality_override_buy_pct: 90
  quality_override_upside: 25
  quality_override_exret: 20

hk_small_sell_scoring:
  score_threshold: 58
  hard_trigger_upside: 0
  hard_trigger_buy_pct: 48
  quality_override_buy_pct: 92
  quality_override_upside: 28
  quality_override_exret: 23

hk_micro_sell_scoring:
  score_threshold: 55
  hard_trigger_upside: 0
  hard_trigger_buy_pct: 52
  quality_override_buy_pct: 95
  quality_override_upside: 32
  quality_override_exret: 28
